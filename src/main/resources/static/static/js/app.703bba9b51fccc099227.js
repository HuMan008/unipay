webpackJsonp([1],{"5wzc":function(t,e){},"7d+z":function(t,e){},BgMQ:function(t,e){},CAPq:function(t,e){},"Mo/f":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0GVE"),n=a("pA2I"),r=a("4nqm"),i=a("+kBM"),o=a("Jyaz"),d=a("7QS3"),l=a("N9Cs"),c=a("7sBf"),u=a("lD22"),p=a("hyHv"),m=a("bfLU"),f=a("7+uW"),y=a("mvHQ"),h=a.n(y),v=a("NYxO");f.default.use(v.a);var g=new v.a.Store({state:{busy:!1,user:{token:"",nickName:"",roleSet:{},permissionSet:{}}},mutations:{SET_USER:function(t,e){t.user=e;try{window.sessionStorage.setItem("gt_user_info",h()(e))}catch(t){}},CLEAN_USER:function(t){t.user={};try{window.sessionStorage.clear("gt_user_info")}catch(t){}}},getters:{authenticated:function(t){return t.user&&t.user.token},hasRole:function(t,e){return t.user.roleSet.lengh>0&&-1!==t.user.roleSet.indexof(e)},hasPermission:function(t,e){return t.user.permissionSet.lengh>0&&-1!==t.user.permissionSet.indexof(e)}},actions:{}});try{var b=JSON.parse(window.sessionStorage.getItem("gt_user_info"));b&&g.commit("SET_USER",b)}catch(t){}var _=g,w=(a("CAPq"),a("Wgzf")),k=a.n(w),S=a("f3bp"),x=a("wW5F"),T=a("W8/L"),j=a.n(T),C=a("PJh5"),I=a.n(C);a("Vz2w");I.a.locale("zh-cn");var L={name:"App",data:function(){return{locale:j.a}},components:{ALocaleProvider:x.a}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("a-locale-provider",{attrs:{locale:this.locale}},[e("router-view")],1)],1)},staticRenderFns:[]};var M=a("VU/8")(L,O,!1,function(t){a("TcnM")},null,null).exports,F=a("/ocq"),D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[e("a-breadcrumb-item",[this._v("仪表盘")])],1),this._v(" "),e("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},[this._v("Content\n  ")])],1)},staticRenderFns:[]};var N=a("VU/8")({data:function(){return{collapsed:!1}},components:{}},D,!1,function(t){a("7d+z")},"data-v-9d80006e",null).exports,A={name:"Layout",data:function(){return{collapsed:!1,nickName:""}},mounted:function(){this.getInfo()},methods:{toggleCollapsed:function(){this.collapsed=!this.collapsed},routerChange:function(t){this.$router.push({name:t})},getInfo:function(){this.nickName=JSON.parse(window.sessionStorage.getItem("gt_user_info")).nickName},logOut:function(){this.$store.commit("CLEAN_USER"),this.$router.push("/login")}},components:{ADropdown:a("hOIf").a}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"myLayout"},[a("a-layout-header",{staticClass:"header"},[a("div",{staticClass:"logoBox"},[a("div",{staticClass:"logo"},[t._v("\n        国通支付管理平台\n      ")])]),t._v(" "),a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"ant-dropdown-link",attrs:{href:"#"}},[a("a-icon",{attrs:{type:"user"}}),t._v("\n        "+t._s(t.nickName)+"\n        "),a("a-icon",{attrs:{type:"down"}})],1),t._v(" "),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"0",on:{click:t.logOut}},[t._v("\n          退出登录\n        ")])],1)],1)],1),t._v(" "),a("a-layout",[a("a-layout-sider",{model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[a("a-menu",{style:{height:"100%",borderRight:0},attrs:{mode:"inline",defaultSelectedKeys:["0"],defaultOpenKeys:["sub1"],inlineCollapsed:t.collapsed}},[a("a-sub-menu",{key:"sub1",staticClass:"mySubMenu"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"user"}}),t._v(" "),a("span",[t._v("系统管理")])],1),t._v(" "),a("a-menu-item",{key:"11",on:{click:function(e){return t.routerChange("AppManage")}}},[t._v("应用管理")]),t._v(" "),a("a-menu-item",{key:"12",on:{click:function(e){return t.routerChange("ChargeConfig")}}},[t._v("收款账号管理")])],1),t._v(" "),a("a-sub-menu",{key:"sub2",staticClass:"mySubMenu"},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"user"}}),t._v(" "),a("span",[t._v("订单管理")])],1),t._v(" "),a("a-menu-item",{key:"21",on:{click:function(e){return t.routerChange("OrderManage")}}},[t._v("订单列表")]),t._v(" "),a("a-menu-item",{key:"22",on:{click:function(e){return t.routerChange("PayingOrder")}}},[t._v("支付中订单")])],1)],1)],1),t._v(" "),a("a-layout",{staticStyle:{padding:"0 24px 24px"}},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")(A,U,!1,function(t){a("x/XF")},"data-v-6ad3a1b3",null).exports,V=a("//Fk"),q=a.n(V),R=a("mtWM"),E=a.n(R);f.default.use(d.a);var $=E.a.create();f.default.prototype.$message=d.a,$.interceptors.request.use(function(t){return _.getters.authenticated&&(t.headers.gtToken=_.state.user.token),t}),$.interceptors.response.use(function(t){if(t.data&&t.data.status>=10001&&t.data.status<=10007){var e="";switch(t.data.status){case 10005:e="TOKEN错误,请重新登录";break;case 10006:e="权限不足";break;case 10007:e="系统错误，请联系技术人员";break;case 10001:e="您未登录或登录超时"}return d.a.error(e,3,function(){_.commit("CLEAN_USER"),pt.replace({name:"Login"})}),null}return t},function(t){if(t.response)switch(t.response.status){case 401:d.a.alert("登录状态超时，请重新登录").then(function(){_.commit("CLEAN_USER"),pt.replace({name:"Login"})}).catch();break;case 504:return d.a.alert({message:"网络连接异常，请重试",duration:2e3}),q.a.reject(t)}return q.a.reject(t)});var P=$,H=function(t){return P.post("/web/user/login?code="+t.code+"&pwd="+t.pwd)},K={name:"Login",metaInfo:function(){return{title:"支付管理平台：登录"}},data:function(){return{}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){t||H(a).then(function(t){var a=t.data;if(0===a.status){e.$message.success("登录成功");var s={token:a.data.token,nickName:a.data.code,roleSet:a.data.roles,permissionSet:a.data.permissions};e.$store.commit("SET_USER",s),setTimeout(function(){e.$router.push("/main/Dashboards")},2e3)}else e.$message.error(a.message)})})}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg"},[e("div",{staticClass:"loginBox"},[e("h2",{staticClass:"color_main"},[this._v("支付管理平台")]),this._v(" "),e("a-form",{staticClass:"login-form",attrs:{id:"components-form-demo-normal-login",form:this.form},on:{submit:this.handleSubmit}},[e("a-form-item",[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入用户名!"}]}],expression:"[\n            'code',\n            { rules: [{ required: true, message: '请输入用户名!' }] }\n          ]"}],attrs:{placeholder:"请输入用户名"}},[e("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),this._v(" "),e("a-form-item",[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pwd",{rules:[{required:!0,message:"请输入密码"}]}],expression:"[\n            'pwd',\n            { rules: [{ required: true, message: '请输入密码' }] }\n          ]"}],attrs:{type:"password",placeholder:"请输入密码"}},[e("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),this._v(" "),e("a-form-item",[e("a-button",{staticClass:"login-form-button",attrs:{type:"primary",size:"large",block:"","html-type":"submit"}},[this._v("登 录")])],1)],1)],1)])},staticRenderFns:[]};var G=a("VU/8")(K,J,!1,function(t){a("BgMQ")},"data-v-64bf8704",null).exports,B=a("IlMV"),X=a("0VVK"),W=a("QzVA");function Q(t){return parseFloat(t).toFixed(2)}var Y={metaInfo:function(){return{title:"应用管理"}},data:function(){return{labelCol:{xs:{span:3},sm:{span:4}},status1Options:[],collapsed:!1,tHead:[{title:"应用名称",width:180,dataIndex:"appName"},{title:"应用ID",width:150,dataIndex:"appKey"},{title:"备注",width:150,dataIndex:"remark",slot:{customRender:"status"}},{title:"更新于",width:190,dataIndex:"updatedAt",key:"updatedAt"},{title:"状态",key:"id",scopedSlots:{customRender:"modifyStatus"}},{title:"编辑",scopedSlots:{customRender:"editApp"}},{title:"支付方式授权",scopedSlots:{customRender:"payGrant"}}],innerColumns:[{title:"列名",width:120,dataIndex:"desp"},{title:"值",dataIndex:"val"}],ListOfData:[],searchInfo:{page:1,per_page:20},pagination:{pageNo:1,pageSize:20,total:0,current:1},modelVisible:!1,modify_visible:!1,modify_tipMsg:"",modify_status_from:{index:"",key:"",oldStatus:"",newStatus:""},confirmLoading:!1,previewVisible:!1,modalTitle:"",modalType:"",form:this.$form.createForm(this),searchForm:{appName:"",status:""},grantModelVisible:!1,selectList:[],newCharge:{},waitGrantAppId:"",editAppKey:""}},mounted:function(){this.getStatus1Options(),this.getList(this.pagination.pageNo,this.pagination.pageSize)},methods:{chargeChange:function(t,e){this.$set(this.newCharge,e,t)},firstCaseToLow:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},openGrantPayModal:function(t){var e=this;this.newCharge={},this.selectList=[],this.waitGrantAppId=t,this.grantModelVisible=!0,P.get("/web/app/getAccounts?appkey="+t).then(function(t){if(0===t.data.status)for(var a in e.selectList=t.data.data,t.data.data){var s=t.data.data[a].paytypeResponse;for(var n in s){var r=s[n];e.$set(e.newCharge,r.payType,null===r.selected?0:r.selected)}}})},cancelGrant:function(){this.grantModelVisible=!1},doGrant:function(){var t=this;this.$set(this.newCharge,"appKey",this.waitGrantAppId),P.post("/web/app/grantpay",this.newCharge).then(function(e){if(0===e.data.status){var a=t;t.grantModelVisible=!1,t.$notification.success({message:"操作成功",duration:3,onClose:function(){a.getList()}})}else t.$notification.warning({message:e.data.message})})},pageList:function(t){this.getList(t.current,this.pagination.pageSize)},getList:function(t,e){var a=this;this.ListOfData=[];var s={pageNo:t,pageSize:e,params:{appName:this.searchForm.appName,status:this.searchForm.status}};return P.post("/web/app/queryApp",s).then(function(e){var s=e.data;if(0===s.status){var n=s.data.rows;for(var r in a.pagination.total=s.data.totalCount,a.pagination.current=t,n)a.ListOfData.push({key:r,appKey:n[r].appKey,appName:n[r].appName,appSecret:n[r].appSecret,status:n[r].status,remark:n[r].remark,syncUrl:n[r].syncUrl,asyncUrl:n[r].asyncUrl,orderHeader:n[r].orderHeader,orderDescp:n[r].orderDescp,defaultOrderExpiredTime:n[r].defaultOrderExpiredTime,createdAt:n[r].createdAt,updatedAt:n[r].updatedAt,innerData:[{key:"row"+r+n[r].appSecret,desp:"秘钥",val:n[r].appSecret},{key:"row"+r+n[r].orderHeader+Math.random(),desp:"默认订单标题",val:n[r].orderHeader},{key:"row"+r+n[r].orderDescp+Math.random(),desp:"默认订单描述",val:n[r].orderDescp},{key:"row"+r+n[r].syncUrl+Math.random(),desp:"默认同步地址",val:n[r].syncUrl},{key:"row"+r+n[r].asyncUrl+Math.random(),desp:"默认异步地址",val:n[r].asyncUrl},{key:"row"+r+n[r].defaultOrderExpiredTime,desp:"默认订单分钟数",val:n[r].defaultOrderExpiredTime}]})}else a.$message.error(s.message?s.message:"系统错误")}),[]},getStatus1Options:function(){var t=this;P.get("/web/app/getStatus",{}).then(function(e){0===e.data.status&&(t.status1Options=e.data.data)})},changeStatus:function(t){1===t.status?this.modify_tipMsg="确认启用【"+t.appName+"】应用吗?":this.modify_tipMsg="确认禁用【"+t.appName+"】应用吗?",this.modify_visible=!0,this.modify_status_from.index=t.key,this.modify_status_from.key=t.appKey,this.modify_status_from.oldStatus=t.status,this.modify_status_from.newStatus=0===t.status?1:0},modify_modal_handleOk:function(){var t=this,e="/web/app/updateStatus?appkey="+this.modify_status_from.key+"&status="+this.modify_status_from.newStatus;P.get(e).then(function(e){var a=e.data;if(t.modify_visible=!1,0===a.status){var s=t;t.$notification.success({message:"修改应用状态成功",duration:3,onClose:function(){s.getList()}})}else t.$notification.error({message:"修改应用状态失败"})})},modify_modal_handleCancel:function(){var t=this.modify_status_from.index;this.ListOfData[t].status=this.modify_status_from.oldStatus},openModal:function(t,e){var a=this;this.editAppKey="",this.modalType=e,this.modelVisible=!0,1===this.modalType?(this.modalTitle="新增应用",setTimeout(function(){a.form.setFieldsValue({appName:"",remark:"",orderHeader:"",orderDescp:"",defaultOrderExpiredTime:10,syncUrl:"",asyncUrl:""})},100)):(this.modalTitle="编辑应用",this.editAppKey=t.appKey,setTimeout(function(){a.form.setFieldsValue({appKey:t.appKey,appName:t.appName,remark:t.remark,orderHeader:t.orderHeader,orderDescp:t.orderDescp,defaultOrderExpiredTime:t.defaultOrderExpiredTime,syncUrl:t.syncUrl,asyncUrl:t.asyncUrl,status:t.status})},100))},closeModal:function(t){this.modelVisible=!1,this.modalType=""},saveOrUSubmit:function(t){t.preventDefault();var e=this;this.form.validateFields(function(t,a){t||(1===e.modalType?e.submitAdd(a):e.submitEdit(a))})},pageChange:function(t){},submitAdd:function(t){var e=this;P.post("/web/app/addApp",t).then(function(t){if(0===t.data.status){var a=e;e.modelVisible=!1,e.$notification.success({message:"添加应用成功",duration:3,onClose:function(){a.getList()}})}else e.$notification.warning({message:t.data.message})})},submitEdit:function(t){var e=this;P.post("/web/app/updateApp",t).then(function(t){if(0===t.data.status){var a=e;e.modelVisible=!1,e.$notification.success({message:"修改应用成功",duration:3,onClose:function(){a.getList()}})}else e.$notification.warning({message:t.data.message})})},moment:I.a},components:{ATable:W.a,ASwitch:X.a,AModal:B.a},filters:{currency:Q}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[a("a-breadcrumb-item",[t._v("应用管理")]),t._v(" "),a("a-breadcrumb-item",[t._v("应用列表")])],1),t._v(" "),a("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"300px"}},[a("div",{staticClass:"row"},[a("a-form-item",{staticClass:"serchItem row",attrs:{label:"应用名称"}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"应用名称关键字"},model:{value:t.searchForm.appName,callback:function(e){t.$set(t.searchForm,"appName",e)},expression:"searchForm.appName"}},[t._v(t._s(t.searchForm.appName))])],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"状态"}},[a("a-select",{model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.status1Options,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList(1,20)}}},[t._v("查询")])],1)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.openModal("",1)}}},[t._v("新增应用")])],1),t._v(" "),a("a-table",{attrs:{columns:t.tHead,dataSource:t.ListOfData,pagination:t.pagination},on:{change:t.pageList},scopedSlots:t._u([{key:"money",fn:function(e){return a("div",{},[t._v(t._s(t._f("currency")(e.money/100)))])}},{key:"preset_money",fn:function(e){return a("div",{},[t._v(t._s(t._f("currency")(e.preset_money/100)))])}},{key:"modifyStatus",fn:function(e){return a("a-switch",{attrs:{checkedChildren:"有效",unCheckedChildren:"无效",checked:!e.status,defaultChecked:!e.status},on:{click:function(a){return t.changeStatus(e)}}})}},{key:"editApp",fn:function(e){return a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return t.openModal(e,2)}}},[t._v("编辑")])}},{key:"payGrant",fn:function(e){return a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return t.openGrantPayModal(e.appKey)}}},[t._v("支付授权")])}},{key:"expandedRowRender",fn:function(e){return a("a-table",{attrs:{bordered:!0,columns:t.innerColumns,dataSource:e.innerData,pagination:!1}})}}])})],1),t._v(" "),a("a-modal",{attrs:{title:"支付方式授权",visible:t.grantModelVisible,confirmLoading:t.confirmLoading},on:{ok:t.doGrant,cancel:t.cancelGrant}},[t._l(t.selectList,function(e){return[a("a-divider",{key:e.cateName,staticStyle:{"font-color":"red"},attrs:{orientation:"left"}},[t._v(t._s(e.cateName))]),t._v(" "),t._l(e.paytypeResponse,function(e){return a("a-form-item",{key:e.payType,staticClass:"serchItem row",attrs:{"label-col":{span:4},"wrapper-col":{span:6},label:e.payName}},[a("a-select",{staticStyle:{width:"380px"},attrs:{defaultValue:e.selected},on:{change:function(a){return t.chargeChange(a,e.payType)}}},[a("a-select-option",{attrs:{value:"0"}},[t._v("禁用")]),t._v(" "),t._l(e.chargeConfig,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})],2)],1)})]})],2),t._v(" "),t.modelVisible?a("a-modal",{attrs:{title:t.modalTitle,visible:t.modelVisible,confirmLoading:t.confirmLoading},on:{ok:t.saveOrUSubmit,cancel:t.closeModal}},[a("a-form",{attrs:{id:"saveOrUpdateForm",form:t.form},on:{submit:t.saveOrUSubmit}},[1!==t.modalType?a("a-form-item",{staticStyle:{display:"none"},attrs:{label:"","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appKey",{}],expression:"[\n        'appKey',\n        {}\n      ]"}],attrs:{maxlength:"48"}})],1):t._e(),t._v(" "),1!==t.modalType?a("a-form-item",{staticStyle:{display:"none"},attrs:{label:"","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{}],expression:"[\n        'status',\n        {}\n      ]"}],attrs:{maxlength:"48"}})],1):t._e(),t._v(" "),a("a-form-item",{attrs:{label:"应用名称","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appName",{rules:[{required:!0,message:"请输入应用名称"}]}],expression:"[\n        'appName',\n        {rules: [{ required: true, message: '请输入应用名称' }]}\n      ]"}],attrs:{maxlength:"48"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"备注","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!1,message:"应用备注信息"}]}],expression:"[\n        'remark',\n        {rules: [{ required: false, message: '应用备注信息' }]}\n      ]"}],attrs:{type:"textarea",maxlength:"48"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"订单时长","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["defaultOrderExpiredTime",{rules:[{required:!1,message:"订单有效分钟输"}]}],expression:"[\n        'defaultOrderExpiredTime',\n        {rules: [{ required: false, message: '订单有效分钟输' }]}\n      ]"}],attrs:{type:"number",min:5,max:60}})],1),t._v(" "),a("a-form-item",{attrs:{label:"订单标题",title:"默认交易标题","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderHeader",{rules:[{required:!1,message:"默认交易标题"}]}],expression:"[\n        'orderHeader',\n        {rules: [{ required: false, message: '默认交易标题' }]}\n      ]"}],attrs:{maxlength:"40"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"订单备注",title:"默认交易备注","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderDescp",{rules:[{required:!1,message:"默认交易备注"}]}],expression:"[\n        'orderDescp',\n        {rules: [{ required: false, message: '默认交易备注' }]}\n      ]"}],attrs:{maxlength:"100"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"同步地址",title:"默认同步地址","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["syncUrl",{rules:[{required:!1,message:"默认交易备注"}]}],expression:"[\n        'syncUrl',\n        {rules: [{ required: false, message: '默认交易备注' }]}\n      ]"}],attrs:{maxlength:"200"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"异步地址",title:"默认异步地址","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["asyncUrl",{rules:[{required:!1,message:"默认异步地址"}]}],expression:"[\n        'asyncUrl',\n        {rules: [{ required: false, message: '默认异步地址' }]}\n      ]"}],staticStyle:{width:"320px"},attrs:{maxlength:"200"}})],1)],1)],1):t._e(),t._v(" "),a("a-modal",{attrs:{title:"应用状态修改警告",maskClosable:!1},on:{ok:t.modify_modal_handleOk,cancel:t.modify_modal_handleCancel},model:{value:t.modify_visible,callback:function(e){t.modify_visible=e},expression:"modify_visible"}},[a("p",[t._v(t._s(t.modify_tipMsg))])])],1)},staticRenderFns:[]};var tt=a("VU/8")(Y,Z,!1,function(t){a("5wzc")},"data-v-010ae713",null).exports,et=a("ifoU"),at=a.n(et),st={metaInfo:function(){return{title:"收款账号管理"}},data:function(){return{payTypeCombo:[],payTypeComboMap:new at.a,statusCombo:[],searchForm:{name:"",payType:"",status:""},collapsed:!1,tHead:[{title:"账号名称",width:180,dataIndex:"name"},{title:"支付方式",width:150,dataIndex:"payType",scopedSlots:{customRender:"payTypeDiv"}},{title:"创建于",width:190,dataIndex:"createdAt",key:"createdAt"},{title:"更新于",width:190,dataIndex:"updatedAt",key:"updatedAt"},{title:"状态",key:"status",scopedSlots:{customRender:"modifyStatus"}},{title:"操作",scopedSlots:{customRender:"editConfig"}}],innerColumns:[{title:"列名",width:180,dataIndex:"desp"},{title:"值",key:"val",scopedSlots:{customRender:"longTextShow"}}],ListOfData:[],modelVisible:!1,modify_visible:!1,modify_tipMsg:"",canEditItemPayType:!0,editItemPayTpye:"",modify_status_form:{index:"",key:"",oldStatus:"",newStatus:""},confirmLoading:!1,previewVisible:!1,modalTitle:"",modalType:"",form:this.$form.createForm(this)}},mounted:function(){this.getStatusCombo(),this.getPayTypeCombo(),this.getList()},methods:{getList:function(){var t=this;this.ListOfData=[];var e="/web/account/queryAccounts?name="+this.searchForm.name+"&payType="+this.searchForm.payType+"&status="+this.searchForm.status;return P.get(e,{}).then(function(e){var a=e.data;if(0===a.status){var s=a.data;for(var n in s)t.ListOfData.push({key:n,id:s[n].id,name:s[n].name,payType:s[n].payType,status:s[n].status,configJson:s[n].configJson,createdAt:s[n].createdAt,innerData:[{key:"row"+n+s[n].configJson,desp:"JSON串",val:s[n].configJson}],updatedAt:s[n].updatedAt})}else t.$message.error(a.message?a.message:"系统错误")}),[]},getStatusCombo:function(){var t=this;P.get("/web/app/getStatus",{}).then(function(e){0===e.data.status&&(t.statusCombo=e.data.data)})},getPayTypeCombo:function(){var t=this;P.get("/web/app/getAccountTypes",{}).then(function(e){if(0===e.data.status)for(var a in t.payTypeCombo=e.data.data,e.data.data)t.payTypeComboMap.set(e.data.data[a].value,e.data.data[a].label)})},formatPayType:function(t){return this.payTypeComboMap.get(t)},changeStatus:function(t){1===t.status?this.modify_tipMsg="确认启用【"+t.name+"】收款账号吗?":this.modify_tipMsg="确认禁用【"+t.name+"】收款账号吗?",this.modify_visible=!0,this.modify_status_form.index=t.key,this.modify_status_form.key=t.id,this.modify_status_form.oldStatus=t.status,this.modify_status_form.newStatus=0===t.status?1:0},modify_modal_handleOk:function(){var t=this,e="/web/account/updateAccountStatus?id="+this.modify_status_form.key+"&status="+this.modify_status_form.newStatus;P.post(e).then(function(e){var a=e.data;if(t.modify_visible=!1,0===a.status){var s=t;t.$notification.success({message:"修改成功",duration:3,onClose:function(){s.getList()}})}else t.$notification.error({message:"修改状态失败"})})},modify_modal_handleCancel:function(){var t=this.modify_status_form.index;this.ListOfData[t].status=this.modify_status_form.oldStatus},openModal:function(t,e){var a=this;this.modalType=e,this.modelVisible=!0,1===this.modalType?(this.canEditItemPayType=!1,this.modalTitle="新增收款账号",setTimeout(function(){a.form.setFieldsValue({payType:"",configJson:"",name:"",status:0})},200)):(this.modalTitle="编辑账号",this.canEditItemPayType=!0,this.editItemPayTpye=t.payType,setTimeout(function(){a.form.setFieldsValue({payType:t.payType,configJson:t.configJson,name:t.name,id:t.id,status:t.stuatus})},200))},closeModal:function(t){this.modelVisible=!1,this.modalType=""},saveOrUSubmit:function(t){t.preventDefault();var e=this;this.form.validateFields(function(t,a){t||(1===e.modalType?e.submitAdd(a):e.submitEdit(a))})},submitAdd:function(t){var e=this;P.post("/web/account/addAccount",t).then(function(t){if(0===t.data.status){var a=e;e.modelVisible=!1,e.$notification.success({message:"添加收款账号成功",duration:3,onClose:function(){a.getList()}})}else e.$notification.warning({message:t.data.message})})},submitEdit:function(t){var e=this;P.post("/web/account/updateAccount",t).then(function(t){if(0===t.data.status){var a=e;e.modelVisible=!1,e.$notification.success({message:"修改应用成功",duration:3,onClose:function(){a.getList()}})}else e.$notification.warning({message:t.data.message})})},moment:I.a},components:{ATable:W.a,ASwitch:X.a,AModal:B.a},filters:{currency:Q}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[a("a-breadcrumb-item",[t._v("系统管理")]),t._v(" "),a("a-breadcrumb-item",[t._v("收款账号管理")])],1),t._v(" "),a("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"300px"}},[a("div",{staticClass:"row"},[a("a-form-item",{staticClass:"serchItem row",attrs:{label:"名称"}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"收款账号名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}},[t._v(t._s(t.searchForm.name))])],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"状态"}},[a("a-select",{model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:""}},[t._v("--全部--")]),t._v(" "),t._l(t.statusCombo,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",staticStyle:{width:"250px"},attrs:{label:"支付类型"}},[a("a-select",{staticStyle:{width:"180px"},model:{value:t.searchForm.payType,callback:function(e){t.$set(t.searchForm,"payType",e)},expression:"searchForm.payType"}},[a("a-select-option",{attrs:{value:""}},[t._v("--全部--")]),t._v(" "),t._l(t.payTypeCombo,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList()}}},[t._v("查询")])],1)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.openModal("",1)}}},[t._v("新增收款账号")])],1),t._v(" "),a("a-table",{attrs:{columns:t.tHead,dataSource:t.ListOfData,pagination:!1},scopedSlots:t._u([{key:"payTypeDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatPayType(e)))])}},{key:"modifyStatus",fn:function(e){return a("a-switch",{attrs:{checkedChildren:"有效",unCheckedChildren:"无效",checked:!e.status,defaultChecked:!e.status},on:{click:function(a){return t.changeStatus(e)}}})}},{key:"editConfig",fn:function(e){return a("a",{attrs:{href:"javaScript:void(0);"},on:{click:function(a){return t.openModal(e,2)}}},[t._v("编辑")])}},{key:"expandedRowRender",fn:function(e){return a("a-table",{attrs:{bordered:!0,columns:t.innerColumns,dataSource:e.innerData,pagination:!1},scopedSlots:t._u([{key:"longTextShow",fn:function(e){return a("div",{attrs:{title:e.val}},[a("p",{staticClass:"longText"},[t._v(t._s(e.val))])])}}])})}}])})],1),t._v(" "),t.modelVisible?a("a-modal",{attrs:{title:t.modalTitle,visible:t.modelVisible,confirmLoading:t.confirmLoading},on:{ok:t.saveOrUSubmit,cancel:t.closeModal}},[a("a-form",{attrs:{id:"saveOrUpdateForm",form:t.form},on:{submit:t.saveOrUSubmit}},[a("a-form-item",{staticStyle:{display:"none"},attrs:{label:"隐藏域","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[]}],expression:"[\n        'id',\n        {rules: []}\n      ]"}],attrs:{maxlength:"48"}})],1),t._v(" "),a("a-form-item",{staticStyle:{display:"none"},attrs:{label:"隐藏域","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[]}],expression:"[\n        'status',\n        {rules: []}\n      ]"}],attrs:{maxlength:"48"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"账号名称","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入收款账号名称"}]}],expression:"[\n        'name',\n        {rules: [{ required: true, message: '请输入收款账号名称' }]}\n      ]"}],attrs:{maxlength:"48"}})],1),t._v(" "),a("a-form-item",{attrs:{label:"支付类型","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["payType",{rules:[{required:!0,message:"请选择支付账号类型"}]}],expression:"['payType',{rules:[{required:true,message:'请选择支付账号类型'}]}]"}],attrs:{defaultValue:t.editItemPayTpye,disabled:t.canEditItemPayType}},t._l(t.payTypeCombo,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("a-form-item",{attrs:{label:"配置JSON串","label-col":{span:4},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["configJson",{rules:[{required:!0,message:"配置JSON必填"}]}],expression:"[\n        'configJson',\n        {rules: [{ required: true, message: '配置JSON必填' }]}\n      ]"}],attrs:{type:"textarea"}})],1)],1)],1):t._e(),t._v(" "),a("a-modal",{attrs:{title:"应用状态修改警告",maskClosable:!1},on:{ok:t.modify_modal_handleOk,cancel:t.modify_modal_handleCancel},model:{value:t.modify_visible,callback:function(e){t.modify_visible=e},expression:"modify_visible"}},[a("p",[t._v(t._s(t.modify_tipMsg))])])],1)},staticRenderFns:[]};var rt=a("VU/8")(st,nt,!1,function(t){a("Mo/f")},"data-v-06d5740e",null).exports,it={metaInfo:function(){return{title:"订单管理"}},data:function(){return{collapsed:!1,tHead:[{title:"统一订单号",width:180,dataIndex:"id",scopedSlots:{customRender:"orderIdDiv"}},{title:"应用名称",width:150,dataIndex:"appId",scopedSlots:{customRender:"appDiv"}},{title:"订单标题",width:150,dataIndex:"subjects"},{title:"应用订单号",width:150,dataIndex:"appOrderNo"},{title:"支付订单号",width:150,dataIndex:"paymentId"},{title:"订单金额",width:150,dataIndex:"fee"},{title:"状态",width:150,dataIndex:"status",scopedSlots:{customRender:"statusDiv"}},{title:"支付方式",width:150,dataIndex:"payType",scopedSlots:{customRender:"payTypeDiv"}},{title:"创建于",width:190,dataIndex:"createdAt"},{title:"通知记录",width:120,scopedSlots:{customRender:"notifyLog"}},{title:"发送通知",width:120,scopedSlots:{customRender:"sendMsg"}}],innerColumns:[{title:"列名",width:160,dataIndex:"desp"},{title:"值",dataIndex:"val"}],searchInfo:{page:1,per_page:20},pagination:{pageNo:1,pageSize:20,total:0,current:1},searchForm:{appId:"",queryId:"",status:"",payType:""},ListOfData:[],appListOfData:[],payStatusListOfData:[],payTypeListOfData:[],payStatusMap:new at.a,payTypeMap:new at.a,appMap:new at.a,modal_notifyLogVisible:!1,notifyLogHd:[{title:"通知地址",width:200,scopedSlots:{customRender:"longTextShow_url"}},{title:"参数",width:250,scopedSlots:{customRender:"longTextShow_param"}},{title:"响应",width:180,scopedSlots:{customRender:"longTextShow_response"}},{title:"通知时间",width:120,dataIndex:"noticeDatetime"},{title:"次数",width:30,dataIndex:"repeatCount"},{title:"发送方式",width:40,dataIndex:"sendType",scopedSlots:{customRender:"sendType"}},{title:"创建时间",width:120,dataIndex:"createdAt"}],notifyLogList:[]}},mounted:function(){var t=this;this.getPayStatusOptions(),this.getAppOptions(),this.getPayTypeOptions(),setTimeout(function(){t.getList(t.pagination.pageNo,t.pagination.pageSize)},300)},methods:{chargeChange:function(t,e){this.$set(this.newCharge,e,t)},pageList:function(t){this.getList(t.current,this.pagination.pageSize)},getList:function(t,e){var a=this;this.ListOfData=[];var s={pageNo:t,pageSize:e,params:{appId:this.searchForm.appId,queryId:this.searchForm.queryId,status:this.searchForm.status,payType:this.searchForm.payType}};return P.post("/web/order/queryOrder",s).then(function(e){var s=e.data;if(0===s.status){var n=s.data.rows;for(var r in a.pagination.total=s.data.totalCount,a.pagination.current=t,n)a.ListOfData.push({key:n[r].id,id:n[r].id,appId:n[r].appId,appOrderNo:n[r].appOrderNo,paymentId:n[r].paymentId,fee:n[r].fee,subjects:n[r].subjects,syncUrl:n[r].syncUrl,asyncUrl:n[r].asyncUrl,status:n[r].status,payType:n[r].payType,createdAt:n[r].createdAt,innerData:[{key:"row"+r+n[r].appId,desp:"应用ID",val:n[r].appId},{key:"row"+r+n[r].appUserId+Math.random(),desp:"应用用户号",val:n[r].appUserId},{key:"row"+r+n[r].paymentUid+Math.random(),desp:"支付用户号",val:n[r].paymentUid},{key:"row"+r+n[r].expiredTimeMinute+Math.random(),desp:"有效分钟",val:n[r].expiredTimeMinute},{key:"row"+r+n[r].descp+Math.random(),desp:"订单详细",val:n[r].descp},{key:"row"+r+n[r].extraParam+Math.random(),desp:"扩展参数",val:n[r].extraParam},{key:"row"+r+n[r].orderPayDatetime+Math.random(),desp:"支付完成时间",val:n[r].orderPayDatetime},{key:"row"+r+n[r].payFee+Math.random(),desp:"支付金额",val:n[r].payFee},{key:"row"+r+n[r].arrFee+Math.random(),desp:"到账金额",val:n[r].arrFee},{key:"row"+r+n[r].payTypeCategory+Math.random(),desp:"支付类型",val:n[r].payTypeCategory},{key:"row"+r+n[r].chargeAccountId+Math.random(),desp:"收款账号ID",val:n[r].chargeAccountId},{key:"row"+r+n[r].expiredTimeMinute,desp:"订单有效分钟数",val:n[r].expiredTimeMinute},{key:"row"+r+n[r].apiVersion+Math.random(),desp:"api版本",val:n[r].apiVersion},{key:"row"+r+n[r].dataVersion+Math.random(),desp:"数据版本",val:n[r].dataVersion},{key:"row"+r+n[r].updatedAt+Math.random(),desp:"更新于",val:n[r].updatedAt},{key:"row"+r+n[r].syncUrl+Math.random(),desp:"默认同步地址",val:n[r].syncUrl},{key:"row"+r+n[r].asyncUrl+Math.random(),desp:"默认异步地址",val:n[r].asyncUrl}]})}else a.$message.error(s.message?s.message:"系统错误")}),[]},getAppOptions:function(){var t=this;P.get("/web/app/appCombo",{}).then(function(e){if(0===e.data.status)for(var a in t.appListOfData=e.data.data,e.data.data)t.appMap.set(e.data.data[a].value,e.data.data[a].label)})},getPayStatusOptions:function(){var t=this;P.get("/web/order/getOrderStatus",{}).then(function(e){if(0===e.data.status)for(var a in t.payStatusListOfData=e.data.data,e.data.data)t.payStatusMap.set(e.data.data[a].value,e.data.data[a].label)})},getPayTypeOptions:function(){var t=this;P.get("/web/app/getAccountTypes",{}).then(function(e){if(0===e.data.status)for(var a in t.payTypeListOfData=e.data.data,e.data.data)t.payTypeMap.set(e.data.data[a].value,e.data.data[a].label)})},showNotifyLog:function(t){var e=this;this.modal_notifyLogVisible=!0,this.notifyLogList=[],P.get("/web/order/getNotifyLog/"+t.id).then(function(t){if(0===t.data.status)for(var a in t.data.data){var s=t.data.data[a];e.notifyLogList.push({key:a,notifyUrl:s.notifyUrl,params:s.params,responseContent:s.responseContent,noticeDatetime:s.noticeDatetime,repeatCount:s.repeatCount,sendType:s.sendType,createdAt:s.createdAt})}else e.$message.error(t.data.message?t.data.message:"系统错误")})},modal_notify_close:function(){this.modal_notifyLogVisible=!1},sendMsg:function(t){var e=this;P.get("/web/order/doNotify/"+t.id).then(function(t){0===t.data.status?e.$message.success(t.data.message):e.$message.error(t.data.message?t.data.message:"系统错误")})},formatStatus:function(t){return this.payStatusMap.get(t+"")},formatApp:function(t){return this.appMap.get(t)},formatPayType:function(t){return this.payTypeMap.get(t)},pageChange:function(t){},remoteQuery:function(t,e){var a=this;P.get("/web/order/queryOrderStatus?appkey="+e+"&orderId="+t+"&type=remoteStatus").then(function(t){var e=t.data;if(0===e.status){var s=e.data,n=0===s.status?"success":1===s.status?"info":"warning",r=s.thirdCode+s.thirdMsg,i=0===s.status?"成功":1===s.status?"待支付":"失败",o="订单金额【"+s.orderFee+"】分.远程响应代码【"+r+"】本地状态解析【"+i+"】";0===s.status&&(o=o+"支付金额【"+s.payFee+"】分."),a.$notification[n]({message:s.unionOrderID,description:o})}else a.$message.error(t.data.message?t.data.message:"系统错误")})},moment:I.a},components:{ATable:W.a,ASwitch:X.a,AModal:B.a},filters:{currency:Q}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[a("a-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("a-breadcrumb-item",[t._v("订单列表")])],1),t._v(" "),a("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"300px"}},[a("div",{staticClass:"row"},[a("a-form-item",{staticClass:"serchItem row",attrs:{label:"订单号"}},[a("a-input",{staticStyle:{width:"180px"},attrs:{title:"应用订单号、支付订单号、统一订单号",placeholder:"订单号"},model:{value:t.searchForm.queryId,callback:function(e){t.$set(t.searchForm,"queryId",e)},expression:"searchForm.queryId"}},[t._v(t._s(t.searchForm.queryId))])],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"应用"}},[a("a-select",{staticStyle:{width:"150px"},model:{value:t.searchForm.appId,callback:function(e){t.$set(t.searchForm,"appId",e)},expression:"searchForm.appId"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.appListOfData,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"支付状态"}},[a("a-select",{staticStyle:{width:"80px"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.payStatusListOfData,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"支付方式"}},[a("a-select",{staticStyle:{width:"150px"},model:{value:t.searchForm.payType,callback:function(e){t.$set(t.searchForm,"payType",e)},expression:"searchForm.payType"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.payTypeListOfData,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList(1,20)}}},[t._v("查询")])],1)],1),t._v(" "),a("a-table",{attrs:{columns:t.tHead,dataSource:t.ListOfData,pagination:t.pagination},on:{change:t.pageList},scopedSlots:t._u([{key:"statusDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatStatus(e)))])}},{key:"appDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatApp(e)))])}},{key:"payTypeDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatPayType(e)))])}},{key:"orderIdDiv",fn:function(e,s){return a("div",{attrs:{title:"双击我查看远程状态"},on:{dblclick:function(){return t.remoteQuery(s.id,s.appId)}}},[t._v(t._s(e))])}},{key:"notifyLog",fn:function(e){return 0===e.status?a("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(a){return t.showNotifyLog(e)}}},[t._v("查看")]):t._e()}},{key:"sendMsg",fn:function(e){return 0===e.status?a("a",{attrs:{href:"#"},on:{click:function(a){return t.sendMsg(e)}}},[t._v("发送")]):t._e()}},{key:"expandedRowRender",fn:function(e){return a("a-table",{attrs:{bordered:!0,columns:t.innerColumns,dataSource:e.innerData,pagination:!1}})}}],null,!0)}),t._v(" "),a("a-modal",{attrs:{width:"860",bordered:!0,title:"通知记录",visible:t.modal_notifyLogVisible,confirmLoading:!1},on:{ok:t.modal_notify_close,cancel:t.modal_notify_close}},[a("a-table",{attrs:{columns:t.notifyLogHd,dataSource:t.notifyLogList,pagination:!1},scopedSlots:t._u([{key:"longTextShow_url",fn:function(e){return a("div",{attrs:{title:e.notifyUrl}},[a("p",{staticClass:"longtext",staticStyle:{"max-width":"200px"}},[t._v("  "+t._s(e.notifyUrl))])])}},{key:"longTextShow_param",fn:function(e){return a("div",{attrs:{title:e.params}},[a("p",{staticClass:"longtext",staticStyle:{"max-width":"250px"}},[t._v("  "+t._s(e.params))])])}},{key:"longTextShow_response",fn:function(e){return a("div",{attrs:{title:e.responseContent}},[a("p",{staticClass:"longtext",staticStyle:{"max-width":"180px"}},[t._v("  "+t._s(e.responseContent))])])}},{key:"sendType",fn:function(e){return a("div",{},[t._v(t._s("0"===e?"自动":"手动"))])}}])})],1)],1)],1)},staticRenderFns:[]};var dt=a("VU/8")(it,ot,!1,function(t){a("iOC0")},"data-v-c2c05030",null).exports,lt={metaInfo:function(){return{title:"订单管理"}},data:function(){return{collapsed:!1,tHead:[{title:"统一订单号",width:180,dataIndex:"id",scopedSlots:{customRender:"orderIdDiv"}},{title:"应用名称",width:150,dataIndex:"appId",scopedSlots:{customRender:"appDiv"}},{title:"订单标题",width:150,dataIndex:"subjects"},{title:"应用订单号",width:150,dataIndex:"appOrderNo"},{title:"订单金额",width:150,dataIndex:"fee"},{title:"支付方式",width:150,dataIndex:"payType",scopedSlots:{customRender:"payTypeDiv"}},{title:"创建于",width:190,dataIndex:"createdAt"}],innerColumns:[{title:"列名",width:160,dataIndex:"desp"},{title:"值",dataIndex:"val"}],searchInfo:{page:1,per_page:20},pagination:{pageNo:1,pageSize:20,total:0,current:1},searchForm:{endTime:"",beginTime:"",payType:""},ListOfData:[],appListOfData:[],payTypeListOfData:[],payStatusMap:new at.a,payTypeMap:new at.a,appMap:new at.a}},mounted:function(){var t=this;this.getAppOptions(),this.getPayTypeOptions(),setTimeout(function(){t.getList(t.pagination.pageNo,t.pagination.pageSize)},300)},methods:{pageList:function(t){this.getList(t.current,this.pagination.pageSize)},doSync:function(){var t=this,e={pageNo:1,pageSize:50,params:{beginTime:this.searchForm.beginTime,endTime:this.searchForm.endTime,payType:this.searchForm.payType}};P.post("/web/order/doSyncOrder",e).then(function(e){var a=e.data;0===a.status?t.$message.success(a.message):t.$message.error(a.message?a.message:"系统错误")})},getList:function(t,e){var a=this;this.ListOfData=[];var s={pageNo:t,pageSize:e,params:{beginTime:this.searchForm.beginTime,endTime:this.searchForm.endTime,payType:this.searchForm.payType}};return P.post("/web/order/queryPayingOrder",s).then(function(e){var s=e.data;if(0===s.status){var n=s.data.rows;for(var r in a.pagination.total=s.data.totalCount,a.pagination.current=t,n)a.ListOfData.push({key:n[r].id,id:n[r].id,appId:n[r].appId,appOrderNo:n[r].appOrderNo,paymentId:n[r].paymentId,fee:n[r].fee,subjects:n[r].subjects,syncUrl:n[r].syncUrl,asyncUrl:n[r].asyncUrl,status:n[r].status,payType:n[r].payType,createdAt:n[r].createdAt})}else a.$message.error(s.message?s.message:"系统错误")}),[]},getAppOptions:function(){var t=this;P.get("/web/app/appCombo",{}).then(function(e){if(0===e.data.status)for(var a in t.appListOfData=e.data.data,e.data.data)t.appMap.set(e.data.data[a].value,e.data.data[a].label)})},getPayTypeOptions:function(){var t=this;P.get("/web/app/getAccountTypes",{}).then(function(e){if(0===e.data.status)for(var a in t.payTypeListOfData=e.data.data,e.data.data)t.payTypeMap.set(e.data.data[a].value,e.data.data[a].label)})},formatApp:function(t){return this.appMap.get(t)},formatPayType:function(t){return this.payTypeMap.get(t)},pageChange:function(t){},disabledDate:function(t){return t&&t>=I()().endOf("day")},onDickerChange:function(t,e){this.searchForm.beginTime=e[0],this.searchForm.endTime=e[1]},range:function(t,e){for(var a=[],s=t;s<e;s++)a.push(s);return a},disabledRangeTime:function(t,e){var a=this;return"start"===e?{disabledHours:function(){return a.range(0,60).splice(4,20)},disabledMinutes:function(){return a.range(30,60)},disabledSeconds:function(){return[55,56]}}:{disabledHours:function(){return a.range(0,60).splice(20,4)},disabledMinutes:function(){return a.range(0,31)},disabledSeconds:function(){return[55,56]}}},moment:I.a},components:{ATable:W.a,ASwitch:X.a,AModal:B.a},filters:{currency:Q}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-breadcrumb",{staticStyle:{margin:"16px 0"}},[a("a-breadcrumb-item",[t._v("订单管理")]),t._v(" "),a("a-breadcrumb-item",[t._v("支付中")])],1),t._v(" "),a("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"300px"}},[a("div",{staticClass:"row"},[a("a-form-item",{staticClass:"serchItem row",attrs:{label:"下单时间"}},[a("a-range-picker",{attrs:{disabledDate:t.disabledDate,showTime:{hideDisabledOptions:!0,defaultValue:[t.moment("00:00:00","HH:mm:ss"),t.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"},on:{change:t.onDickerChange}})],1),t._v(" "),a("a-form-item",{staticClass:"serchItem row",attrs:{label:"支付方式"}},[a("a-select",{staticStyle:{width:"150px"},model:{value:t.searchForm.payType,callback:function(e){t.$set(t.searchForm,"payType",e)},expression:"searchForm.payType"}},[a("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.payTypeListOfData,function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})],2)],1),t._v(" "),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList(1,20)}}},[t._v("查询")])],1),t._v(" "),a("a-form-item",{staticStyle:{"margin-left":"30px"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.doSync}},[t._v("订单同步")])],1)],1),t._v(" "),a("a-table",{attrs:{columns:t.tHead,dataSource:t.ListOfData,pagination:t.pagination},on:{change:t.pageList},scopedSlots:t._u([{key:"statusDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatStatus(e)))])}},{key:"appDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatApp(e)))])}},{key:"payTypeDiv",fn:function(e){return a("div",{},[t._v(t._s(t.formatPayType(e)))])}}])})],1)],1)},staticRenderFns:[]};var ut=a("VU/8")(lt,ct,!1,function(t){a("tSM1")},"data-v-2a3adbf1",null).exports;f.default.use(F.a);var pt=new F.a({routes:[{path:"/",redirect:"Login"},{path:"/Login",name:"Login",component:G},{path:"/main",name:"Layout",component:z,children:[{path:"/main/Dashboards",name:"Dashboards",component:N},{path:"/main/AppManage",name:"AppManage",component:tt},{path:"/main/ChargeConfig",name:"ChargeConfig",component:rt},{path:"/main/OrderManage",name:"OrderManage",component:dt},{path:"/main/PayingOrder",name:"PayingOrder",component:ut}]}]});f.default.use(S.a,{keyName:"metaInfo",attribute:"data-vue-meta",ssrAttribute:"data-vue-meta-server-rendered",tagIDKeyName:"vmid"}),f.default.use(o.a).use(d.a).use(l.a).use(c.a).use(u.a).use(p.a).use(m.b),f.default.use(i.a),f.default.use(k.a),f.default.use(r.a),f.default.use(n.a),f.default.use(s.a),f.default.config.productionTip=!1,f.default.prototype.$message=d.a,f.default.prototype.$notification=p.a,d.a.config({maxCount:1}),p.a.config({}),new f.default({el:"#app",router:pt,store:_,components:{App:M},template:"<App/>",locale:j.a})},TcnM:function(t,e){},iOC0:function(t,e){},tSM1:function(t,e){},uslO:function(t,e,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function n(t){return a(r(t))}function r(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="uslO"},"x/XF":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.703bba9b51fccc099227.js.map